/*! PS-Maps - v2.9.5
 * https://n3rds.work/piestingtal-source-project/ps-gmaps/
 * Copyright (c) 2018-2022; * Licensed GPLv2+ */
window.AgmMapHandler=null,window._agm=window._agm||{},_agm.initialized=!1,jQuery((function(){_agm.initialized=!1,window.AgmMapHandler=function(e,t){var i,a,o,r,n,s="map_"+Math.floor(Math.random()*(new Date).getTime())+"_preview",g=jQuery(e),m=[],_=!1,d=null,l=function(){return jQuery(e+" .agm_mh_directions_container").remove(),!1},c=function(){var t=jQuery(this).find("img");return jQuery(e+" .agm_mh_travel_type img").each((function(){jQuery(this).attr("src",jQuery(this).attr("src").replace(/_on\./,"_off."))})),t.attr("src").match(/car_off\.png/)?r=window.google.maps.DirectionsTravelMode.DRIVING:t.attr("src").match(/bike_off\.png/)?r=window.google.maps.DirectionsTravelMode.BICYCLING:t.attr("src").match(/walk_off\.png/)?r=window.google.maps.DirectionsTravelMode.WALKING:t.attr("src").match(/bus_off\.png/)&&(r=window.google.maps.DirectionsTravelMode.TRANSIT),t.attr("src",t.attr("src").replace(/_off\./,"_on.")),!1},p=function(){var i;jQuery(e+" .agm_mh_directions_container").is(":visible")||(i='<div class="agm_mh_directions_container agm_mh_container">',i+='<div style="width:300px"><span style="float:right"><input type="button" class="agm_mh_close_directions" value="'+l10nStrings.close+'" /> </span><div><a href="#" class="agm_mh_travel_type"><img src="'+_agm.root_url+'/img/system/car_on.png"></a><a href="#" class="agm_mh_travel_type"><img src="'+_agm.root_url+'/img/system/bike_off.png"></a><a href="#" class="agm_mh_travel_type"><img src="'+_agm.root_url+'/img/system/walk_off.png"></a><a href="#" class="agm_mh_travel_type"><img src="'+_agm.root_url+'/img/system/bus_off.png"></a></div></div><div><img src="'+_agm.root_url+'/img/system/a.png">&nbsp;<input size="32" type="text" class="agm_waypoint_a" /></div><div><a href="#" class="agm_mh_swap_direction_waypoints"><img src="'+_agm.root_url+'/img/system/swap.png"></a></div><div><img src="'+_agm.root_url+'/img/system/b.png">&nbsp;<input size="32" type="text"  class="agm_waypoint_b" /></div><div><input type="button" class="agm_mh_get_directions" value="'+l10nStrings.get_directions+'" /></div><div class="agm_mh_directions_panel agm_mh_container"></div>',i+="</div>",g.append(i));var a=f(jQuery(this).attr("href")),o=m[a];if(t.defaults&&t.defaults.directions_snapping){(new window.google.maps.Geocoder).geocode({latLng:o.getPosition()},(function(t,i){i===window.google.maps.GeocoderStatus.OK?(jQuery(e+" .agm_waypoint_b").val(t[0].formatted_address),jQuery(document).trigger("agm_google_maps-user-directions-waypoint_populated",[t[0].formatted_address,o,g]),jQuery(document).trigger("agm:dir_waypoint",[t[0].formatted_address,o,g])):window.alert(l10nStrings.geocoding_error)}))}else{var r=o.getPosition();jQuery(e+" .agm_waypoint_b").val(r),jQuery(document).trigger("agm_google_maps-user-directions-waypoint_populated",[r,o,g]),jQuery(document).trigger("agm:dir_waypoint",[r,o,g])}return!1},u=function(){var t=jQuery(e+" .agm_waypoint_a").val();return jQuery(e+" .agm_waypoint_a").val(jQuery(e+" .agm_waypoint_b").val()),jQuery(e+" .agm_waypoint_b").val(t),!1},w=function(){var i=jQuery(e+" .agm_waypoint_a").val(),n=jQuery(e+" .agm_waypoint_b").val();if(!i||!n)return window.alert(l10nStrings.missing_waypoint),!1;var s=0;"defaults"in t&&"units"in t.defaults?s=t.defaults.units:"units"in t&&(s=t.units);var g={origin:i,destination:n,unitSystem:s,travelMode:r};return a.setPanel(jQuery(e+" .agm_mh_directions_panel").get(0)),o.route(g,(function(e,t){t===window.google.maps.DirectionsStatus.OK?a.setDirections(e):window.alert(l10nStrings.oops_no_directions)})),!1},h=function(e,t,a,o,r,n){n=void 0===n||isNaN(n)?m.length:n,o=o.match(/^https?:\/\//)?o:_agm.root_url+"/img/"+o;var s="";void 0!==r&&void 0!==r.identifier&&(s="agm-id-"+r.identifier),i.setCenter(t);var g=new window.google.maps.marker.AdvancedMarkerElement({title:e,map:i,icon:o,draggable:!1,clickable:!0,position:t}),d='<div class="agm_mh_info_content"><div class="agm_mh_info_title">'+e+'</div><img class="agm_mh_info_icon marker-icon-32" src="'+o+'" /><div class="agm_mh_info_body">'+a+"</div>"+y(n)+j(n,1)+"</div>",l=new window.google.maps.InfoWindow({content:d});window.google.maps.event.addListener(g,"click",(function(){g.show_info=!0,jQuery(document).trigger("agm_google_maps-user-marker_click",[n,e,a,g,i]),jQuery(document).trigger("agm:marker_click",[n,e,a,g,i]),!0===g.show_info&&l.open(i,g)})),g._agmBody=a,g._agmInfo=l,g._identifier=s,m[n]=g,_=!0,jQuery(document).trigger("agm_google_maps-user-adding_marker",[g,n,i,r]),jQuery(document).trigger("agm:add_marker",[g,n,i,r]),i._agm_add_marker(g),Q()},f=function(e){var t=e.replace(/[^0-9]+/,"");return parseInt(t,10)},v=function(){var e=jQuery(this),a=f(e.attr("href")),o=jQuery.extend([],m);"function"==typeof d&&o.sort(d);var r=o[a];if(i.setCenter(r.getPosition()),parseInt(t.street_view,10)){var n=i.getStreetView();n.setPosition(i.getCenter()),n.setVisible(!0)}return jQuery(document).trigger("agm_google_maps-user-map_centered_to_marker",[r,i]),jQuery(document).trigger("agm:centered",[r,i]),!1},y=function(e){return'<a href="#agm_mh_marker-'+e+'" class="agm_mh_marker_item_directions">'+l10nStrings.directions+"</a>"},j=function(e,i){return"show_posts"in t&&t.show_posts&&parseInt(t.show_posts,10)?'<div class="agm_post_links_container"><input type="hidden" value="'+e+'" /></div>':""},Q=function(){if(!t.show_markers||!parseInt(t.show_markers,10))return!1;if(!_)return!1;var e=(new Date).getTime();if(isNaN(t.update_list_timer)&&(t.update_list_at=e+10,t.update_list_timer=window.setTimeout(Q,11)),e<t.update_list_at)return!1;var i=jQuery.extend([],m);"function"==typeof d&&i.sort(d);var a,o,r,n='<ul class="agm_mh_marker_list">';for(a=0;a<i.length;a+=1){if(void 0===(o=i[a]))return!1;r=o.getIcon();try{r=r.url?r.url:r}catch(e){r=o.getIcon()}n+='<li style="clear:both" class="'+o._identifier+'"><a href="#agm_mh_marker-'+a+'" class="agm_mh_marker_item"><img src="'+r+'" class="marker-icon-32" /><div class="agm_mh_marker_item_content"><div><b>'+o.getTitle()+"</b></div><div>"+o._agmBody+"</div></div></a>"+y(a)+j(a)+'<div style="clear:both"></div></li>'}n+="</ul>",jQuery("#agm_mh_markers_"+s).html(n),_=!1},k=function(e,t,i){var a,o,r;if(t.length){for(t="agm-id-"+t,a=m.length-1;a>=0;a-=1)if(void 0!==m[a]&&m[a]._identifier===t){m[a].setMap(null),r=a;break}o=new window.google.maps.LatLng(i.position[0],i.position[1]),h(i.title,o,i.body,i.icon,i,r)}},b=function(e,t){var i;if(t.length)for(t="agm-id-"+t,i=m.length-1;i>=0;i-=1)if(m[i]._identifier===t){m[i].setMap(null),m.splice(i,1),_=!0,Q();break}},I=function(e,t){"function"==typeof e&&void 0===t&&(t=e),"function"==typeof t&&("function"==typeof d&&d.toString()===t.toString()||(d=t,_=!0))};!function(){var _,d,f,y=!1;try{_=parseInt(t.width,10)>0?t.width:t.defaults.width,d=parseInt(t.height,10)>0?t.height:t.defaults.height}catch(e){_=parseInt(t.width,10)>0?t.width:200,d=parseInt(t.height,10)>0?t.height:200}_=_.toString().indexOf("%")?_:parseInt(_,10);try{"units"in t.defaults?t.defaults.units=window.google.maps.UnitSystem[t.defaults.units]:t.defaults.units=window.google.maps.UnitSystem.METRIC}catch(e){t.units=window.google.maps.UnitSystem.METRIC}if(t.zoom=parseInt(t.zoom,10)?parseInt(t.zoom,10):1,t.map_type=t.map_type?t.map_type:"ROADMAP",t.map_alignment=t.map_alignment||t.defaults.map_alignment,t.image_size=t.image_size||t.defaults.image_size,t.image_limit=t.image_limit||t.defaults.image_limit,t.street_view="street_view"in t?t.street_view:0,g.wrap('<div id="map_'+s+'_alignment_container"></div>'),n=jQuery("#map_"+s+"_alignment_container"),g.html('<div id="'+s+'"></div>'),jQuery("#"+s).width(_).height(parseInt(d,10)),g.width(_),t.show_map&&parseInt(t.show_map,10)||jQuery("#"+s).css({position:"absolute",left:"-120000px"}),i=new window.google.maps.Map(jQuery("#"+s).get(0),{zoom:parseInt(t.zoom,10)?parseInt(t.zoom,10):1,minZoom:1,center:new window.google.maps.LatLng(40.7171,-74.0039),mapTypeId:window.google.maps.MapTypeId[t.map_type]}),a=new window.google.maps.DirectionsRenderer({draggable:!0}),o=new window.google.maps.DirectionsService,a.setMap(i),r=window.google.maps.DirectionsTravelMode.DRIVING,g.append('<div id="agm_mh_footer" class="agm_mh_footer"><div class="agm_mh_container" id="agm_mh_markers_'+s+'"></div></div>'),t.markers&&jQuery.each(t.markers,(function(e,t){h(t.title,new window.google.maps.LatLng(t.position[0],t.position[1]),t.body,t.icon,t)})),window.setTimeout((function(){!function(){if(!("show_posts"in t)||!t.show_posts||!parseInt(t.show_posts,10))return!1;jQuery(e+" .agm_post_links_container").each((function(){var e=jQuery(this),a=e.find("input:hidden").val();if(!a)return!0;var o=t.markers[a];if(!o)return!0;var r=!1;if(!(r="post_ids"in o&&o.post_ids&&o.post_ids.length?o.post_ids:t.post_ids))return!0;jQuery.post(_agm.ajax_url,{action:"agm_get_post_titles",post_ids:r},(function(t){if(!t.posts)return!0;var o='<div class="agm_associated_posts_list_title">'+l10nStrings.posts+"</div>";o+='<ul class="agm_associated_posts_list_items">';var r="";jQuery.each(t.posts,(function(e,t){e>2&&(r='style="display:none;"'),o+="<li "+r+'><a href="'+t.permalink+'">'+t.post_title+"</a></li>"})),o+="</ul>",r&&(o+='<a href="#" class="agm_toggle_hidden_post_links">'+l10nStrings.showAll+"</a>"),e.html(o);var n=m[a],s=jQuery(n._agmInfo.getContent());s.find(".agm_post_links_container").html(o);var g='<div class="agm_mh_info_content">'+s.html()+"</div>";n._agmInfo.setContent(g),jQuery("body").on("click",".agm_toggle_hidden_post_links",(function(){var e=jQuery(this).parents(".agm_post_links_container").first();return e.find(".agm_associated_posts_list_items li:hidden").length?(e.find(".agm_associated_posts_list_items li:hidden").show(),jQuery(this).text(l10nStrings.hide)):(e.find(".agm_associated_posts_list_items li:gt(2)").hide(),jQuery(this).text(l10nStrings.showAll)),!1})),jQuery(document).trigger("agm_google_maps-user-post_titles_loaded",[n,t,i]),jQuery(document).trigger("agm:post_titles",[n,t,i])}))}))}()}),20),parseInt(t.street_view,10)){var j=i.getStreetView(),Q=null;Q=t.street_view_pos?new window.google.maps.LatLng(t.street_view_pos[0],t.street_view_pos[1]):i.getCenter(),j.setPosition(Q),t.street_view_pov&&j.setPov({heading:parseInt(t.street_view_pov.heading,10),pitch:parseInt(t.street_view_pov.pitch,10),zoom:parseInt(t.street_view_pov.zoom,10)}),j.setVisible(!0)}var S,M=!1;try{t.plot_routes&&(M=!0)}catch(e){}switch(M&&(S=!1,jQuery.each(m,(function(e,t){if(!S)return S=t,!0;var a={origin:S.getPosition(),destination:t.getPosition(),travelMode:window.google.maps.DirectionsTravelMode.DRIVING},o=new window.google.maps.DirectionsRenderer({draggable:!0}),r=new window.google.maps.DirectionsService;o.setMap(i),r.route(a,(function(e,t){t===window.google.maps.DirectionsStatus.OK&&o.setDirections(e)})),S=t}))),jQuery(document).trigger("agm_google_maps-user-map_initialized",[i,t,m]),jQuery(document).trigger("agm:init",[i,t,m]),jQuery(document).trigger("agm_google_maps-user-map_postprocess_markers",[t,m,h]),jQuery(document).trigger("agm:postprocess_markers",[t,m,h]),jQuery(document).trigger("agm_google_maps-user-sort_function",[i,t,I]),jQuery(document).trigger("agm:sort",[i,t,I]),t.map_alignment){case"right":g.css({float:"right"});break;case"center":g.css({margin:"0 auto"});break;default:g.css({float:"left"})}n.append('<div style="clear:both"></div>'),jQuery("body").on("click",e+" .agm_mh_travel_type",c),jQuery("body").on("click",e+" .agm_mh_swap_direction_waypoints",u),jQuery("body").on("click",e+" .agm_mh_close_directions",l),jQuery("body").on("click",e+" .agm_mh_get_directions",w),jQuery("body").on("click",e+" .agm_mh_marker_item",v),jQuery("body").on("click",e+" .agm_mh_marker_item_directions",p),g.on("agm:update_marker",k),g.on("agm:remove_marker",b),g.on("agm:sort_function",I),f=window.setInterval((function(){if(y&&g.is(":visible")){var e=i.getCenter();window.google.maps.event.trigger(i,"resize"),i.setCenter(e),jQuery(document).trigger("agm:after_init",[i,t,m]),window.clearInterval(f)}}),300),window.google.maps.event.addListenerOnce(i,"idle",(function(){y=!0}))}()},function e(){window._agmMapIsLoaded?(jQuery.each(_agmMaps,(function(e,t){new window.AgmMapHandler(t.selector,t.data)})),_agm.initialized=!0):window.setTimeout(e,100)}();jQuery("body").on("click",".agm-map-popup",(function(e){e.preventDefault(),e.stopPropagation();for(var t,i,a,o=jQuery(this).attr("id")+"-container",r=jQuery("body"),n=jQuery("html"),s=jQuery("#"+o),g=jQuery('<div class="agm-modal-back"></div>').appendTo(r),m=r.css("overflow"),_=n.css("overflow"),d=s.data("width"),l=s.data("height"),c="#"+jQuery(this).attr("id"),p=_agmMaps.length-1;p>=0;p--)if(_agmMaps[p].selector===c){a=_agmMaps[p];break}if(s.show(),g.show(),d.toString().length&&!isNaN(d)||(d=a.data.defaults.width),l.toString().length&&!isNaN(l)||(l=a.data.defaults.height),d.toString().length&&!isNaN(d)&&(t=d/2*-1,s.css({width:d,"margin-left":t})),l.toString().length&&!isNaN(l)){if(l=parseInt(l),parseInt(a.data.show_markers)){var u=jQuery("#agm_mh_footer",s),w=2;a.data.markers.length>2&&(w=a.data.markers.length<5?a.data.markers.length:5),u.css({top:l,bottom:0}),l+=68*w}i=l/2*-1,s.css({height:l,"margin-top":i})}return r.css("overflow","hidden"),n.css("overflow","hidden"),s.one("agm:close",(function(){r.css("overflow",m),n.css("overflow",_),s.hide(),g.remove()})),g.on("click",(function(){s.trigger("agm:close")})),!1}))}));