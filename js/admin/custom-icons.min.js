/*! PS-Maps - v2.9.5
 * https://n3rds.work/piestingtal-source-project/ps-gmaps/
 * Copyright (c) 2018-2022; * Licensed GPLv2+ */
window.setTimeout((function(){var t=jQuery(window),e=jQuery("table.icons"),n=jQuery(".custom-icon-list"),r=jQuery(".add-custom-icon"),a=jQuery(".add-media-image"),o=jQuery(".custom-icon-url"),i=jQuery(".custom-icon-preview"),l=[],u=function(){n.val(JSON.stringify(l))},s=function(t){if(o.val()!==o.data("last")){f(),o.data("last",o.val());var e=o.val();i.attr("src",e)}},d=function(e){var n;if(!(e||"").length)return!1;if(!e.match(/^https?:\/\//))return!1;for(n=0;n<l.length;n+=1)if(e===l[n])return!1;p(e),l.push(e),u(),t.resize()},c=function(){jQuery("tr.alternate",e).removeClass("alternate"),jQuery("tr:nth-child(even)",e).addClass("alternate")},p=function(t){var n,r,a,o,i,l=jQuery("<tr></tr>").appendTo(e);i=jQuery('<img style="position: absolute;left:-9999999px;top:-99999999px" />'),n=jQuery('<td style="text-align:center"><img src="" class="marker-icon-32" /></td>'),r=jQuery('<td class="url">'+t+"</td>"),a=jQuery("<td>...</td>"),o=jQuery('<td><button type="button" class="button remove">Remove</button></td></tr>'),n.appendTo(l),r.appendTo(l),a.appendTo(l),o.appendTo(l);i.on("load",(function(t){a.text(i.width()+" x "+i.height()),i.remove()})).attr("src",t).appendTo(jQuery("body")),jQuery("img",n).attr("src",t),c()},f=function(t){i.hide(),r.addClass("disabled").prop("disabled",!0),r.text(r.data("disabled"))},y=function(t){i.show(),r.removeClass("disabled").prop("disabled",!1),r.text(r.data("enabled"))};e.on("click",".remove",(function(e){var n,r=jQuery(this).parents("tr").first(),a=r.find(".url").text();for(n=l.length-1;n>=0;n-=1)if(a===l[n]){l.splice(n,1);break}r.remove(),c(),u(),t.resize()})),r.on("click",(function(t){var e=o.val();o.val(""),o.data("last",""),f(),d(e)})),a.on("click",(function(t){var e=window.wp.media({title:"WÃ¤hle ein Bild",multiple:!1,library:{type:"image"},button:{text:"Symbol verwenden"}});e.on("close",(function(){var t=e.state().get("selection").first(),n=((t||{}).toJSON?t.toJSON():{}).url;d(n)})),e.open()})),o.on("keyup",s),o.on("change",s),i.on("load",(function(t){y()})),function(){var e,r=n.val();try{l=JSON.parse(r)}catch(t){}for(null!==l&&"object"==typeof l||(l=[]),e=0;e<l.length;e+=1)p(l[e]);t.resize()}(),f()}),50);