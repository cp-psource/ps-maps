/*! PS-Maps - v2.9.5
 * https://n3rds.work/piestingtal-source-project/ps-gmaps/
 * Copyright (c) 2018-2022; * Licensed GPLv2+ */
window.setTimeout((function(){jQuery(window);var t=jQuery("table.icons"),e=jQuery(".custom-icon-list"),r=jQuery(".add-custom-icon"),n=jQuery(".add-media-image"),a=jQuery(".custom-icon-url"),o=jQuery(".custom-icon-preview"),i=[],l=function(){e.val(JSON.stringify(i))},u=function(t){if(a.val()!==a.data("last")){p(),a.data("last",a.val());var e=a.val();o.attr("src",e)}},d=function(t){var e;if(!(t||"").length)return!1;if(!t.match(/^https?:\/\//))return!1;for(e=0;e<i.length;e+=1)if(t===i[e])return!1;c(t),i.push(t),l(),jQuery(window).trigger("resize")},s=function(){jQuery("tr.alternate",t).removeClass("alternate"),jQuery("tr:nth-child(even)",t).addClass("alternate")},c=function(e){var r,n,a,o,i,l=jQuery("<tr></tr>").appendTo(t);i=jQuery('<img style="position: absolute;left:-9999999px;top:-99999999px" />'),r=jQuery('<td style="text-align:center"><img src="" class="marker-icon-32" /></td>'),n=jQuery('<td class="url">'+e+"</td>"),a=jQuery("<td>...</td>"),o=jQuery('<td><button type="button" class="button remove">Remove</button></td></tr>'),r.appendTo(l),n.appendTo(l),a.appendTo(l),o.appendTo(l);i.on("load",(function(t){a.text(i.width()+" x "+i.height()),i.remove()})).attr("src",e).appendTo(jQuery("body")),jQuery("img",r).attr("src",e),s()},p=function(t){o.hide(),r.addClass("disabled").prop("disabled",!0),r.text(r.data("disabled"))},y=function(t){o.show(),r.removeClass("disabled").prop("disabled",!1),r.text(r.data("enabled"))};t.on("click",".remove",(function(t){var e,r=jQuery(this).parents("tr").first(),n=r.find(".url").text();for(e=i.length-1;e>=0;e-=1)if(n===i[e]){i.splice(e,1);break}r.remove(),s(),l(),jQuery(window).trigger("resize")})),r.on("click",(function(t){var e=a.val();a.val(""),a.data("last",""),p(),d(e)})),n.on("click",(function(t){var e=window.wp.media({title:"WÃ¤hle ein Bild",multiple:!1,library:{type:"image"},button:{text:"Symbol verwenden"}});e.on("close",(function(){var t=e.state().get("selection").first(),r=((t||{}).toJSON?t.toJSON():{}).url;d(r)})),e.open()})),a.on("keyup",u),a.on("change",u),o.on("load",(function(t){y()})),function(){var t,r=e.val();try{i=JSON.parse(r)}catch(t){}for(null!==i&&"object"==typeof i||(i=[]),t=0;t<i.length;t+=1)c(i[t]);jQuery(window).trigger("resize")}(),p()}),50);